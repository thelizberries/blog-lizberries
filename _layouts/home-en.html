---
layout: default
---

<h1 class="text-center">The Lizberries Blog (English)</h1>

{% assign english_posts  = site.posts | where: "lang", "en" | sort: "date" | reverse %}
{% assign posts_per_page = 5 %}
{% assign total_posts = english_posts  | size %}
{% assign total_pages = total_posts | divided_by: posts_per_page | ceil %}
{% assign current_page = page.url | remove: '/' | replace: 'page', '' | plus: 0 %}
{% if current_page == 0 %}
  {% assign current_page = 1 %}
{% endif %}
{% assign start = posts_per_page | times: current_page | minus: posts_per_page %}
{% assign paginated_posts = english_posts  | slice: start, posts_per_page %}

<div class="posts-grid">
  {% for post in paginated_posts %}
  <article class="post-preview{% unless post.image %} no-image{% endunless %}">
    <a href="{{ post.url | relative_url }}">
      {% if post.image %}
        <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
      {% endif %}
      <h2>{{ post.title }}</h2>
      <p class="post-date">{{ post.date | date: "%B %d, %Y" }}</p>
      <p class="excerpt">
        {{ post.excerpt | strip_html | truncatewords: 30 }}
      </p>
      <p class="read-more text-red">→ Read more</p>
    </a>
  </article>
  {% endfor %}
</div>

<div class="pagination text-center" style="margin: 2rem 0;">
  {% if current_page > 1 %}
    <a href="{% if current_page == 2 %}/index.html{% else %}/page{{ current_page | minus: 1 }}/{% endif %}" 
       class="text-red text-uppercase" style="margin-right: 1.5rem;">
      ← Newer posts
    </a>
  {% endif %}
  {% if current_page < total_pages %}
    <a href="/page{{ current_page | plus: 1 }}/" class="text-red text-uppercase">
      Older posts →
    </a>
  {% endif %}
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const postLinks = document.querySelectorAll('.post-preview a');
    postLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const targetUrl = this.href;
        document.body.classList.add('fade-out');
        setTimeout(() => {
          window.location.href = targetUrl;
        }, 500);
      });
    });
  });
</script>
